<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela a partir de CSV</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        .seletor {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <div class="seletor">
        <label for="csvSelect">Escolha o CSV:</label>
        <select id="csvSelect" class="csss x_n_promotor">
            <option value="">Selecione um arquivo</option>
            <option value="1">Teste 1</option>
            <option value="3">Teste 3</option>
            <option value="4">Teste 4</option>
            <option value="5">Teste 5</option>
        </select>
    </div>

    <h1>Tabela a partir de CSV</h1>
    <table id="tableee"></table>

    <script>
        async function carregarCSV2(caminho2) {
            try {
                if (!caminho2) {
                    alert("Por favor, selecione um arquivo CSV.");
                    return;
                }

                const response2 = await fetch(caminho2);
                if (!response2.ok) throw new Error("Erro ao carregar o arquivo CSV");
                const texto2 = await response2.text();

                // Converter CSV para tabela
                const linhas2 = texto2.trim().split("\n");
                const tabela2 = document.getElementById("tableee");
                tabela2.innerHTML = ""; // Limpar tabela antes de carregar

                linhas2.forEach((linha, index) => {
                    const dados = linha.split(";");
                    const tr2 = document.createElement("tr");

                    dados.forEach((dado) => {
                        const celula2 = index === 0 ? document.createElement("th") : document.createElement("td");
                        celula2.textContent = dado;
                        tr2.appendChild(celula2);
                    });

                    tabela2.appendChild(tr2);
                });
            } catch (erro) {
                console.error("Erro:", erro);
                alert("Não foi possível carregar o arquivo CSV.");
            }
        }

        document.getElementsByClassName("csss")[0].addEventListener("change", (event) => {
            const caminho2 = 'teste'+event.target.value+'.csv';
            carregarCSV2(caminho2);
        });
        

        // Carregar um CSV inicial (opcional)
        carregarCSV2("teste.csv");
    </script>
</body>
</html>
